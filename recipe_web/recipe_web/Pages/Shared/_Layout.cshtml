<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"]</title>
    <link rel="stylesheet" href="~/css/primaryLayout.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/cookies.css" asp-append-version="true" />
    <link rel="icon" type="image/png" href="~/images/logo.png" />
</head>
<body>

    <nav class="nav_container">
        <div class="logo_container">
            <img src="~/images/logo.png" alt="logo cooking hat" height="76px" width="65px" />
            <p>Student <br>Sharing <br>Recipe</p>
        </div>
        <ul class="nav_list">
            <li class="item_list"><a href="/">Homepage</a></li>
            <li class="item_list"><a href="/Recipes">Recipes</a></li>
            <li class="item_list"><a href="/UserProfile">User Profile</a></li>
            <li class="item_list"><a href="/ToDoList">To Do List</a></li>
            <li class="item_list"><a href="/Login">Login</a></li>
        </ul>
    </nav>

    <div class="header_image">
        <img src="~/images/header.jpg" alt="header image" />
    </div>

    <div class="content_container">
        @RenderBody()
    </div>

    @if (!Context.Request.Cookies.ContainsKey("cookie-card") && !Context.Request.HasFormContentType)
    {
        <div id="cookie-popup" class="cookie-card">
            <span class="title">🍪 Cookie Notice</span>
            <p class="description">
                We use cookies to ensure that we give you the best experience on our website.
            </p>
            <div class="actions">
                <button id="accept-btn" class="accept" type="button">Accept</button>
                <button id="decline-btn" class="pref" type="button">Decline</button>
            </div>
        </div>
    }

    <footer class="footer_container">
        <p>College Cuisine Innovations Inc.<br>
            Contact us<br>
        <a href="mailto:i.kalcheva@student.fontys.nl"><img src="~/images/email.png" alt="email icon" height="50px" width="50px"/></a></p>
    </footer>

</body>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const cookiePopup = document.getElementById("cookie-popup");
        const acceptBtn = document.getElementById("accept-btn");
        const declineBtn = document.getElementById("decline-btn");

        // Check if the user has already accepted or declined
        if (document.cookie.includes("cookieAccepted=true")) {
            cookiePopup.style.display = "none"; // Hide the popup if already accepted
        } else {
            cookiePopup.style.display = "block"; // Show the popup if not accepted
        }

        // Add event listeners for accept and decline buttons
        acceptBtn.addEventListener("click", function () {
            document.cookie = "cookieAccepted=true; max-age=" + (365 * 24 * 60 * 60) + "; path=/";
            cookiePopup.style.display = "none"; // Hide the popup after accepting
        });

        declineBtn.addEventListener("click", function () {
            // You can add your logic for declining cookies here
            cookiePopup.style.display = "none"; // Hide the popup after declining
        });
    });

</script>
</html>
